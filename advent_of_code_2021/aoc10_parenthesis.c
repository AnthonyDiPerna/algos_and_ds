#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <stdbool.h>
#include <stdint.h>

#define SIZE (6)

#define TERMINATOR  ('\0')
#define NEWLINE     ('\n')
#define INVALID_VAL ('%')
#define ARRAY_LEN   (10001) //String length 10^4 (Just making it big to be safe)
#define MAX_LINES   (100)

#define VALID_LINE   (0)
#define INVALID_LINE (-1)
#define CORRUPT_LINE (-2)

//Assuming
//String won't be empty
//Only parens - no other chars

char parens[ARRAY_LEN] = {' '};
int indeX = 0; //had to use indeX as name ... clashed with solution.c

typedef struct 
{
    int lineLen;
    int errorCode;
} lineInfo;

bool isEmpty(void)
{
    //printf("\nisempty %c", indeX);
    return indeX == 0;
}

//true data could be pushed
//false fata could not be pushed
bool push(char val)
{
    if (indeX < ARRAY_LEN)
    {
        //printf("\npush %c", val);
        //printf("\ni %d", indeX);
        parens[indeX++] = val;
        return true;
    }
    else
    {
        return false;
    }
    
}

char peek(void)
{
    if (indeX > 0)
    {
        //printf("\npeek %c", parens[indeX-1]);
        //printf("\ni %d", indeX);
        return parens[indeX-1];
    }
    else
    {      
        return ' ';
    }
}

char pop(void)
{
    if (indeX > 0)
    {
        char tmp = peek();
        indeX--;
        parens[indeX] = ' ';
        //printf("\npop %c", tmp);
        //printf("\ni %d", indeX);
        return tmp;
    }
    else
    {
        return ' ';
    }
}

char getOpenParenType(char closedParenType)
{
    switch(closedParenType)
    {
        case ')':       return '(';   break;
        case ']':       return '[';   break;
        case '}':       return '{';   break;
        case '>':       return '<';   break;
        default :       return INVALID_VAL;
    }
}

char getClosedParenType(char closedParenType)
{
    switch(closedParenType)
    {
        case '(':       return ')';   break;
        case '[':       return ']';   break;
        case '{':       return '}';   break;
        case '<':       return '>';   break;
        default :       return INVALID_VAL;
    }
}

bool isMatch(char closedParenType)
{
    //printf("\nMatch Close %c", closedParenType);
    //printf("\nMatch Open  %c", peek());
    return (peek() == getOpenParenType(closedParenType));
}

//for qsort
int compare( const void* a , const void* b )
{
    const uint64_t ai = *( const uint64_t* )a;
    const uint64_t bi = *( const uint64_t* )b;

    if( ai < bi )
    {
        return -1;
    }
    else if( ai > bi )
    {
        return 1;
    }
    else
    {
        return 0;
    }
}

void calcScore(char * s)
{
    //some global state ... to clean up eek
    indeX = 0;
    memset( parens, ' ', sizeof(char)*ARRAY_LEN );
    
    int debugCount = 0;
    lineInfo info = {0,VALID_LINE};
    int i = 0;
    int corruptScore = 0;
    char firstCorruptChar = ' ';
    int lineCount = 1;
    uint64_t invalidScores[MAX_LINES] = {0};
    int invalidScoreCount = 0;

    //Loop to end of string 
    for (i = 0; s[i] != TERMINATOR; i++)
    {
        //Check if we are on the next line
        if (s[i] != NEWLINE)
        {
            //Same Line
            //go through each character, if its an OPEN bracket, push, CLOSED bracket pop   
            char c = s[i];
            if(VALID_LINE == info.errorCode)
            {
                if (c == '(' || c == '[' || c == '{' || c == '<')
                {
                    //Open bracket, push onto stack
                    push(c);
                    debugCount++;
                }
                else
                {
                    //Closed bracket, check we are closing the right type
                    if (isMatch(c))
                    {
                        //Found match, pop the open bracket and continue
                        pop();
                        debugCount++;
                    }
                    else
                    {
                        //Found the wrong closing bracket
                        info.errorCode = CORRUPT_LINE;
                        firstCorruptChar = c;
                        printf("\n   CORRUPTED - expected %c actual %c debugCount %d\n",getClosedParenType(peek()),c,debugCount);
                    }
                }
            }
        }
        else
        {
            //new line!
            //add score for corrupt, ignore invalid and good
            if (info.errorCode == CORRUPT_LINE)
            {
                int tmp = 0;
                if (firstCorruptChar == ')') tmp = 3;
                if (firstCorruptChar == ']') tmp = 57;
                if (firstCorruptChar == '}') tmp = 1197;
                if (firstCorruptChar == '>') tmp = 25137; 

                corruptScore += tmp;
                printf("\n  SUB-SCORE %d Corruptchar %c TOTAL-SCORE %d\n",tmp,firstCorruptChar,corruptScore);
            }
            else if (info.errorCode == VALID_LINE)
            {
                //Check array is empty (no hanging open braces)
                if(!isEmpty())
                {
                    info.errorCode = INVALID_LINE;
                    printf("\n   INCOMPLETE - debugCount %d\n",debugCount);
                    while(!isEmpty())
                    {
                        char c = pop();
                        uint64_t tmp = 0;
                        
                        if (c == '(') tmp = 1;
                        else if (c == '[') tmp = 2;
                        else if (c == '{') tmp = 3;
                        else if (c == '<') tmp = 4; 
                        else {}
                        invalidScores[invalidScoreCount] = (uint64_t)invalidScores[invalidScoreCount] * (uint64_t)5 + (uint64_t)tmp;
                        printf("\n  SUB %d CHAR %c CURR_SCORE %ju\n",tmp,c,invalidScores[invalidScoreCount]);
                    }
                    printf("\n    INCOMPLETE SCORE %ju \n",invalidScores[invalidScoreCount]);
                    invalidScoreCount++;
                    
                }    
            }

            printf("\nLINE %d LEN %d TYPE %d\n",lineCount, debugCount, info.errorCode);
            lineCount++;
            
            //reset line state
            indeX = 0;
            info.errorCode = VALID_LINE;
            debugCount = 0;
            //memset( parens, ' ', sizeof(char)*ARRAY_LEN );
        }
    }

    printf("\nCORRUPT SCORE %d TOTAL_LINES %d \n",corruptScore,lineCount-1);
    /*
    printf("Before sorting the list is: \n");
    for (int j=0; j < invalidScoreCount; j++)
    {
        printf("\n       BEFORE SORT INVALID SCORES %d : %ju \n",j,invalidScores[j]);
    }
    */
    qsort(invalidScores, invalidScoreCount, sizeof(uint64_t), compare);
    printf("\nINVALID SCORE %ju INVALID_LINES %d \n",invalidScores[invalidScoreCount/2],invalidScoreCount);
    
    for (int k=0; k < invalidScoreCount; k++)
    {
        printf("\n       AFTER SORT INVALID SCORES %d : %ju \n",k,invalidScores[k]);
    }
    
            

}

int main() 
{    
  //array of characters vs string literal  
  char testString[] = "([<{<}>])";
  
  char exampleString[] = 
  "[({(<(())[]>[[{[]{<()<>>\n"
  "[(()[<>])]({[<{<<[]>>(\n"
  "{([(<{}[<>[]}>{[]{[(<()>\n"
  "(((({<>}<{<{<>}{[]{[]{}\n"
  "[[<[([]))<([[{}[[()]]]\n"
  "[{[{({}]{}}([{[{{{}}([]\n"
  "{<[[]]>}<{[{[{[]{()[[[]\n"
  "[<(<(<(<{}))><([]([]()\n"
  "<{([([[(<>()){}]>(<<{{\n"
  "<{([{{}}[<[[[<>{}]]]>[]]\n";

  char puzzleString[] =
  "[{<(<[<<(<{[[<[]{}><()[]>]]<(([]<>)<(){}>)({[]{}}([]()))>}>{{{<(()<>)[[]()]><(<>())[[]<>]>}{({()\n"
"<<[{([[{{[[[({()()}[<>[]]){<<>[]>([]<>)}]{[{{}{}}<{}{}>]{{[]<>}{[]{}}}}][{{{(){}}<<>[]>}}]]}{\n"
"([<{([<[([({[{[]{}}{{}{}}]}{[{<>{}}{(){}}]})[{[[(){}][(){}]]{<<>[]}{{}[]}}}]])]><({{{[[{{}{}}]<{<>\n"
"{{((<([<[<[((<{}>{()()})<[{}[]]{<>{}}>)<({[]{}}([][])){{[]<>}{{}<>}}>]>]><[[[[[<<>()>(()[])](<[][]>{<>{}}\n"
"{[[<[[((<[{{<[[]{}](()[])>}{<({}[])[[]<>]>}}{[(<()()><()>)({[]()}[<>()>)]}]((<{[<>[]]{{}()}}>[{<()<>>{[]\n"
"({{((<[{{{([{[(){}][<>]}([<>()][[]()])]{<{{}<>}<{}<>>>{{()[]}{()()}}})<<[(<><>)<[]()>][((){}){[]{}}]>>}}\n"
"{<(<{[[([[(<[(<>[])]<{()}<()[]>>><{<{}[]><[]>}(<<>{}><()()>)>)]]{((({{<><>}{{}{}}}{<[]()><{}<>>})<[{(\n"
"<[{(<{<((<(<{(<>{})}<<[]>(<>{})>>){{(<()[]>[[]<>])}[{[[][]]<<>()>}{[{}()]<(){}>}]}>{(((<<>\n"
"(<[{[<((((<[[[{}{}]{{}<>}]({[][]}[(){}])][{(<>[])<[]<>>}<[(){}]>]>)))<({{[<([]<>)<()<>>>[{\n"
"{{<<[<({[{([(<[][]>{[][]})<<<>[]>([]())>])[(<<[]<>>[{}()]>{([]{})})]}](<[<(<<>[]>)>{(<[]{}>[<>[]])<<[]()>((\n"
"[[[{<{[[[([[<<<>>[{}()]}[({}[])<()<>>]]]{<<<[]{}>[<>[]]><{[]<>}{[]{}}>>{(<{}{}>{<><>})({[]()}{{}<>})}})]<<<[(\n"
"(({([<{{{{<<<({}())[()<>]>{[[]()][()[]}}>>}<({({{}<>}[[]{}])(({}{}){()()})}{[(<>{}){<>{}}]{[<>[]]({}<>)}})>}(\n"
"{(([{(([<[{(<{[]<>}<()<>>>[([]{}}(<>{})])}({[<<>[]><<>{}>]}<[<()[]>[<>{}]]{<()<>>{(){}}}>)]>([<((<{}()>\n"
"({{<{{{{{{({<{<>{}}>(<<>[]>[[][]])})]{[{{{(){}}[()<>]}<[<>][[]{}]>}{[<{}<>>{<>}]{{[]{}}(<>{})\n"
"{{(([{([{([<([[]{}]{<>[]})>{(((){})[()()]){{{}<>]<()()>}}])(({{{<>{}}{[]{}}}[((){})[<>]]}<{(()[])[\n"
"{<[((<<(([{{<{[][]}>{[()<>]{()[]}}}}]))<<((<[<[][]>[[]()]][({}){[]<>}]>))>>>>))<(<<([<<[{<<><>>[(\n"
"[([[(<([(({<([{}][<>[]]){<{}{}><{}[]>}>(<({}[])>(<()()>))}{[[{{}()}{<><>}][{()[]}<()()>]>[{<<><>>{\n"
"[{[<{(<[([[[{[{}<>]({}())}(<<>>[[]<>])]{({<>()}{()()}){{[]()>{[]()}}}]]{[[{({}()){[][]}}((<><>))][[\n"
"<{(<[<<<{{[{{<{}<>>[[]<>]}[{()<>}[()<>]]}{[{{}[]}{()}]{<[]<>>([][])}}]({[[{}]{()<>}](({}{}))}>}{<[<({}()){()\n"
"<(<[<([({[<([<[]{}>{[]<>}]{{[]{}}{{}{}}})<<{()<>}({}{})><<[]()>{()<>]>>>(([{[]()}({}())]([[]()]<{}()>))\n"
"{[<<([[<([<<(<[]<>>){<<>()>(<><>)}><<{<><>}[{}[]]>([{}()])>>])>][{({[<<[<>]{<>()}>><<[<>()]{{\n"
"<<<[<<{[<<(({<{}<>>{{}<>}}[<[]<>>({}[])]))><{{<[[]()][(){}]><{{}()}(<>)>}[((<>{})(()<>))<[(){}][[][]]>]>>>]}\n"
"(([{{[{{<<{{[({}<>)(<>{})](<(){}><{}{}))}}([{({}())<<><>>}{<(){}>}]{{[{}{}]{(){}}}<([]<>){()()}>})\n"
"({{([{{({[{<<({}[])(()[])>[{{}()}[{}{}]]><<{()<>}{{}}>>}<[((()<>)([]{}))[{()()}(()<>)]]{[{(){}}{()\n"
"<[<{<[{({(([((<>{}){()[]}){{{}{}}{[]<>}}]{{({}<>)<{}[]>}<(()<>}(()[])>}))(<{({<><>}[[]()])<[{}()](\n"
"[[{[({{<{{{{[<<>[]]({}{})]<([]{})(<>{})>}{{({}{})[{}{}]}{<<>[]><{}>}}}{<(<<>[]>{{}{}})[(()<\n"
"[([(<{{[<[{[<(<>())<[]()>>{{{}}<[][]>}][[{[][]}<{}[]>]({{}()}[[][]])]}{{{<{}{}><{}<>>}{[()[]]<()[]>}}<<{[]{}}\n"
"[[(((({<<[<<({{}()}){<()()><<>[]>}>{((<><>)({}())){<[]{}><()[]>}}><[{<{}>}({{}{}}[<>()])]{{({}{})}[<\n"
"((<<[{{[[([[<[{}()]((){})>[{()[]}<<>{}>]]([<{}()>][{{}[]}[()]])]{({[()()][[]()]}(((){}){{}{}}))[{(<>())}\n"
"{[[<{<{[{{[(<<<>[]>([]())>{(()[])[<>{}]}){<(<>())(<>{})>{<[]<>>[{}[]]}}]({<<<>[]><{}()>>([[][]])}<[<{\n"
"[(<[<{<[([[{{{<>[]}[[]{}]>({[][]}[[][]])}{[(<>[])[[]]]({()()}({}[]))}]])<[<<<{<>{}}{[][]}>((()){()<>})>>\n"
"({<[<<[{[<({<{{}{}}{<>[]}>{{()}{[]<>}}}[<[{}<>][()[]]>])((<([]())((){})><[(){}]{{}()}>)[{<[]{}>[{}{}]}[\n"
"<[[([([(<(<[[(()[])]{[[]<>]({}{})}]>)>[<[{<<<>()>({}{})><([][])<{}{}>>}<([()[]]<(){}>)[([]{})[{}<>]]>]><[{({\n"
"[<{([([(<{<<{[()[]][()}}<<{}{}>>><<{[]<>}((){})>[{[]()}]>>}[(({{<>[]}[<>()]}<({}{})[{}[]]>)<[{<>{}}([][])\n"
"[<{([((<{({{[<<>()>{[]{}}](<[]()>[{}{}])}})(<{([<>()]{[][]})[{{}()}]}<((()[])(())){([]<>)([]<>)}>>{((({}()){\n"
"((<{{{<<[[<[[{[]<>}<{}[]>]<<(){}><<>>>]<<[[][]>[[][]]>{{<><>}{[]{}}}>>{{{{<>[]}{<>{}}}[[[]<>]<{\n"
"[<<[{[<({[[{{{{}[]}[<><>]}{<<>[]>[{}[]]}}<<(()[])[<>()]>[[<>{}]]>]]}{<({<([]())(<>())>[[{}[]][<>{}]]}){([\n"
"([<{({({{<[({(<><>){(){}}}<{[]{}}{[]())>)({<(){}>[<>[]]})]<[([{}{}]<{}[]>)[[()[]]]]{[{{}<>}]<(()<>)\n"
"[([{<{<{(<<(({[]{}}({}()))){{(<>())(<><>)}(([]{})<{}[]>)}><[<[{}{}]({}{})>]{[<[]()>(<>{})]<({}()\n"
"((<{[(<<[([<{([]{}){<><>)}[[[][]]({}())]>[[{<>()}[()<>]](({}<>)([]))]][<((()[])<()[]>)[[<>()]]>])<<{[\n"
"{[[<{<<[{{(((<{}[]>(()))[<<>()>{[][]}])){<([[]{}]{{}[]})<{{}()}{()()}>}}}[{[[<(){}>{{}()}]\n"
"{[{[<<[{[{([(<[]()>(()<>))]<{[{}<>]<{}()>}<{{}{}}[()[]]>>)[{{<{}>(())}<(<>)[<>[]]>}(<{[]<>}[()()]]<{<>{}}\n"
"[{{[{{[<{[(<{[()()][<>[]]}<([][])(()<>)>>({{{}()}[()<>]}[<[]{}><[]}]))([<<<><>>({}[])>({()[]}[<>])][([(\n"
"[({<[[<{<[(<(<[][]><[]()>){[()()]{()()}}>)[<[<()>(()[])][(<><>)]>((({}())<<>[]>))]]<[{[<<>{}>[{}<>]](<{}{}>((\n"
"<{<(<((<<[[<([<><>][()[]])(<<>{}>[<>[]])>]({<<[]>(()<>)>(((){}){<>[]})}{[[[]](<>())]<<(){}><<>[]>>\n"
"[<{(<{{<(({(<<[]()>><<()<>>>)<{<{}()><()()}}(<[][]>{{}{}})>}[{[{[][]}[()<>]]{([][])(<>[])}}[{[{}()][\n"
"{{(([[[{[{({([()()]([]<>))<[{}{}](<>())>}{{{()<>}{()()}}({()[]}[{}{}])})<([([]{})<()[]>]{<<>()>})>}[[\n"
"(((<[{<[{([[{[[]<>]{<>{}}}[[{}<>](<>{})]]<<[(){}][[]{}}>{[[][]]}>][{{[[]{}]([]{})}[([])<<>>]}\n"
"<[<[[([[[[{{{([]()){(){}}}<[[]{}](<><>)>}}]]]{([[<[(()())(()[]]][[<>{}]<<>[]>]>(<[<>]<<><>>>({{}{}}([]{\n"
"({(([<<[{{[(<({}<>)<[]<>>>(<{}<>>{(){}}))]{(({{}[]})({{}<>}((){}]))[({{}()}[()<>])<({}()){<>()}>]}}}[<\n"
"<[<({[[<<([[((<>())[<><>]){[<>[]]<<>>}]]{([<{}[]>{<><>}])})<<[<([]<>)(()<>)>(<{}()>([]<>))]>[\n"
"({({{[[<<([[({()[]}[<><>]){(()<>){<><>}}][{{<>[]}(<><>)}{[[]<>]<[]>}]])>([[<(({}[])<()>)(<()>[<>{\n"
"<([{(({<[{([<[[]<>]<()<>>><(<>())({})>][[(<>[]){[]{}}]{(<>[])<()[]>}])({[{{}()}{[]()}]}{{[[]{}]({}<>)\n"
"[([{({(({{<<<<(){}>[<>[]]>([<>()][<>[]])>[{(()())[()<>]}<{[][]}[<>{}]>]>}<[<([[]()][<>()])((<><>){[]})>\n"
"<({[{{[{{[([{({}()){{}{}}}<(()())[[][]]>][<[<>()][{}[]]><<<><>>>])([[({}{})(()<>)]{<<><>>([]<>)}]{{<()[]\n"
"<{{<{(([(<<<{{[]()}[[]()]}>{{[{}<>]<()<>>}[{{}{}}[{}[]]]}>>([([<()()>[{}<>]])([<()[]>[<>()]]{([]{})}\n"
"{<({<{[{{({[<{{}()}[()()]>{({}<>)}][<<()()>{[][]}>{<<>()><{}{}>}]})}{(<{<[()()]>}<{({}){()()}}(<[]<>><\n"
"(({{({{{<[[({((){})[<>[]]}[{<>{}}[[]()]])]{<<(<>){{}()}>[<<>>{{}{}}]>([(()[])][([]())<<>()>])}][<[[\n"
"[{[[[{<<<[<{({[]()}({}{}))[{<>}{<>[]}]}>[((<<><>>[[]<>])[[[]<>]<[][]>]){[[{}()][{}<>]]({[]\n"
"<<[{({[[[<[[[<[][]>]{{[]()}(()<>)}]{[[(){}}<{}()>][{<>{}}({}{})]}](({([]{})<()()>}[({}())]))>(<{(<(){}>)}\n"
"({<([[(<(({{<{{}[]}[[]<>]>}[<(<>[])<{}{}>><[[]<>][[]{}]>]}<[({<>{}}{{}()})(<[]()>(()<>))]([<{}()\n"
"((<[{[{[{{<[{[<>{}]}[<[][]><()>]]{{<()[]>}<[(){}]{{}<>}>}>}<(([[[]{}]<[]<>>]{[{}{}]<()[]>})[[{[]{}}{{}\n"
"[([(<([<(<<{(<{}{}>{()<>})[([]())[[]]]}[{{[]<>}((){})}<{{}[]}([]())>]><{[[<>()]]<({}())[{}<>]>}{[({}<>)\n"
"[{[<([<{<{{[[{{}{}}{<><>}]<[[]()]{[]{}}>][{({}{}){[][]}}<<{}{}>([]()]>]}[<<({}<>){()<>}>({(){}}<{}{}>)><([{}\n"
"<{((<{{<{({(([<>{}]{()<>}))(<({}[])(<>())><{{}()}[<>[]]>)}]}(<{{(({}<>)[{}{}])<<<>[]>>}}((<<<\n"
"<[<({<({{([{<<<>[]><[]{}>>(<()()>({}[]))}(((()())<{}[]>))][[[<(){}>[()()]][[{}[]]]]])}([(([{[][]}(()())][{()\n"
"[({{[<((<{{{<[[][]]({}{})>{(<>[]){[]}}}([{()[]}{[]{}}])]}{[<<[(){}]<[]<>>>{({}<>)([]())}>]\n"
"{[{(<({<[[(<<({}<>){[]{}}>(({}{})(<>[]))>({[()[]]<<>{}>}<[[][]]({}())>))(([[<>[]]([]{})][<{}>>){{[[]\n"
"{<([[(<<[(<{<<<>{}><<>>>(({}[])<()<>>)}<{<[]{}><()()>}[{(){}}]>>){<<<{{}{}}{()<>}>{{()[]}{()}>><<<<>[\n"
"<{[{(<{[<<(<<([]{})(())>[({}[]){{}()}]>)(<{[[]()]}>[{(()<>)(()<>)}{[{}<>]{()()}}])>[(({<<>[]>({}[]}}{([]\n"
"{{{([{[([[[{[{(){}}{[]()}][<<>()>]}([[[][]](<><>)])]]]{(<[(<<>[]>[{}<>])(({}[])({}{}))]{<([]{})<[][]>>((\n"
"({{[(<<<[({<[{[]<>}<{}<>>]<<()>[(){}]>>[<<<>{}>{{}[]}><({}{})>]})][(<{[(<>())]}(([<><>){[][]})\n"
"([[([{[<<{(<{<[]()>[(){}]}[(<><>){()<>}]>){{[<()()><<>[]>](<[][]>{[]<>})}<[{<>()}{()[]}]{{<><>}[<><>]}>}}{<<\n"
"<[<([<[(({<{{<(){}><<>[]>}{{<>{}}((){})}}<<[{}]({}[])}{<()()><()<>>}>>[[[{<><>}([][])](({}<>)((){}\n"
"<<[<[[<(<{(<{[[][]]{(){}}}<{{}()}<()[]>>><{<{}>}{{<>{}}[()<>]}>)}><{[<{(()[]]<()()>}<{(){}}\n"
"([([(<({{(<<{[[]<>]({}())}{{[][]}<()[]>}>>)}})(<{{<({<()[]>([]{})}[{{}<>}[<>()]])><[({<>()}{<>[\n"
"<(({{(<(<[{<[{{}[]}[<>{}])(<()<>>({}{}))>[<[<>[]]{{}}>[({}<>)[[]{}]]]}<[[{[]<>}{[]<>}]<(()()){<\n"
"{(<(([{([<({[[<>[]]{<>[]}]{{[]<>}{()}}})<[<[[]()][<>{}]>{[<>{}]<()<>>}]<(<[]>[[]()])([<>()](()<>))]>>])\n"
"{{[([[<<([(<{{{}[]}<()[]>}({[]{}}[[]{}])>(<{(){}}<(){}>><[[]{}]>))])>{{<<{<[()[]]<[]<>>>}{{(()\n"
"{{<[{[<([({<[{[][]}<<>()>]{{[]{}}({}())}]({{[]<>}}(<()<>>(<>[])))}([<[()()][[][]]>((<>{}){()<>})]\n"
"{[[{<{<<{((<<<<><>><[][]>>([()<>]<{}[]>)>{((<><>)({}()))([{}{}][<>])})<({({}[])({}())}<[()[]][{}<>]\n"
"<({{{(<{({<<(<[]<>>{{}})>[[({}<>)(()())]{[[]{}]({}{})>]>({<<()<>>[<>[]]>((()<>)([]{}))}[[([]<>)<[]<>>]{{{}<>}\n"
"{<[{([([{<[{<[<><>]([]())>((<>[])([][]))}]>(({[<[]>[[]<>]]{{{}[]}{[]{}}}}){(<{{}{}}([]<>)>)})}\n"
"(<[{{<([<[({<{{}{}}><{{}<>}([]{})>}<<[()()]{{}()}>[[[]()]({}{})]>)[[{<()[]><[]()>}<[<>()][(){}]>]]]<{(<<[]{}>\n"
"<{([[<{<([({{[<>{}]({}[])](<[][]>{{}[]})}{{{<>[]}<{}()>}<[{}[]]{{}()}>})([<[[][]]{<>()}>[<<>()>({\n"
"<{[{(<<{[<(<{{()<>}{[]()}}[([][])<{}[]>]>[[[{}<>}[()[]]][({}[]){()<>}]]){[<[{}[]][[][]]>(<{}>([][]))][[\n"
"{[{<([<<({<<(<<><>><{}[]>)[(<>()){[]{}}]>(<{{}<>}[[]<>]>([{}{}]))>}([{<(()[])[()<>]>{{()()}}}[[<[][\n"
"<{(<[{<<[[[({([]{})([]<>)}{([][])([][])})[[<[]{}><<><>>]<[{}<>]({}[])>]]<{[[{}{}]({}[])]<{[]<>}(()<>)>}[({<\n"
"(<[{([[[{[<([<{}[]>][(<>[])(()<>)])<[{[][]}([]())]>>][{([(<>())[()[]]])}({({()[]}[{}{}])}{[<[]<>>([]()\n"
"<({{[([[<<[(({{}}{{}()})<<()()><<><>>>)<[<{}[]><()<>>][<<>{}]([]{})]>]>>{<((<<[]>(())>{{()<>}}\n"
"[[[[<{[[({[{{[()[]]([]())}}<<{{}<>}(<>)>({{}{}}<[][]>)>]<{(<<>()>{(){}})[{()()}<<>>]}([{{}]<{}<>>][[()()](\n"
"(([[<(([{<({<<()()>>{<()<>><{}{}>}}{((<>()){()[]})<([]{}){()[]}>})>(<[[<[]()>{[][]>][[[]]<<>\n"
"{[<[({<(<<[[((<>())(<>[])){(<>[])(<>[])}][({[]{}}{{}<>})[<(){}>((){})]]]>>[<<{<<()[]>[[][]>>(\n"
"{<<(<([<<<((({[][]}{<><>})[{[][]}([]{})])<[<{}{}>({}())][((){})[[]()]]>)<[{(()<>)(()[])}](<[\n";


  //printf("\nINPUT : %s ",strlen(puzzleString));
  calcScore(puzzleString);
  
  return 0;
}